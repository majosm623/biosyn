<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Disponibilidad de Médicos</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f7fa;
            margin: 0;
            padding: 20px;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }
        
        h1 i {
            margin-right: 10px;
            color: #3498db;
        }
        
        .doctor-selector {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .doctor-selector > div {
            flex: 1;
            min-width: 250px;
        }
        
        select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            background-color: #f8f9fa;
        }
        
        .time-period {
            margin-bottom: 30px;
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
        }
        
        .time-period h3 {
            color: #2c3e50;
            margin-top: 0;
            margin-bottom: 15px;
        }
        
        .time-period h3 i {
            margin-right: 10px;
        }
        
        .time-grid {
            display: flex;
            overflow-x: auto;
            gap: 10px;
            padding-bottom: 10px;
        }
        
        .day-column {
            min-width: 120px;
            flex-shrink: 0;
        }
        
        .day-header {
            background-color: #3498db;
            color: white;
            padding: 10px;
            text-align: center;
            border-radius: 5px 5px 0 0;
            font-weight: bold;
        }
        
        .date-header {
            background-color: #2980b9;
            color: white;
            padding: 5px;
            text-align: center;
            font-size: 12px;
        }
        
        .time-slots {
            display: flex;
            flex-direction: column;
            gap: 8px;
            background-color: white;
            padding: 10px;
            border-radius: 0 0 5px 5px;
            border: 1px solid #ddd;
            border-top: none;
        }
        
        .time-slot {
            padding: 8px;
            text-align: center;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .time-slot:hover {
            transform: scale(1.05);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .morning {
            background-color: #f6e58d;
        }
        
        .afternoon {
            background-color: #ffbe76;
        }
        
        .available {
            background-color: #55efc4;
            cursor: pointer;
        }
        
        .available:hover {
            background-color: #00b894;
        }
        
        .unavailable {
            background-color: #dfe6e9;
            color: #636e72;
            cursor: not-allowed;
        }
        
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 30px;
            justify-content: center;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }
        
        .morning-legend {
            background-color: #f6e58d;
        }
        
        .afternoon-legend {
            background-color: #ffbe76;
        }
        
        .available-legend {
            background-color: #55efc4;
        }
        
        .unavailable-legend {
            background-color: #dfe6e9;
        }
        
        @media (max-width: 768px) {
            .doctor-selector {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1><i class="fas fa-calendar-alt"></i> Disponibilidad de Médicos</h1>
        
        <div class="doctor-selector">
            <div>
                <h3>Especialidad:</h3>
                <select id="specialty-select">
                    <option value="">Todas las especialidades</option>
                    <option value="Cardiología">Cardiología</option>
                    <option value="Pediatría">Pediatría</option>
                    <option value="Ortopedia">Ortopedia</option>
                    <option value="Dermatología">Dermatología</option>
                    <option value="Ginecología">Ginecología</option>
                    <option value="Neurología">Neurología</option>
                    <option value="Oftalmología">Oftalmología</option>
                    <option value="Psiquiatría">Psiquiatría</option>
                    <option value="Endocrinología">Endocrinología</option>
                    <option value="Gastroenterología">Gastroenterología</option>
                    <option value="Oncología">Oncología</option>
                    <option value="Neumología">Neumología</option>
                    <option value="Urología">Urología</option>
                    <option value="Medicina Interna">Medicina Interna</option>
                    <option value="Cirugía Plástica">Cirugía Plástica</option>
                </select>
            </div>

            <div>
                <h3>Médico:</h3>
                <select id="doctor-select">
                    <option value="">Seleccione un médico</option>
                </select>
            </div>
        </div>
        
        <div id="time-slots-container" style="display: none;">
            <div class="time-period">
                <h3><i class="fas fa-sun"></i> Turno Mañana (7:00 - 12:00)</h3>
                <div id="morning-slots" class="time-grid"></div>
            </div>
            
            <div class="time-period">
                <h3><i class="fas fa-moon"></i> Turno Tarde (14:00 - 18:00)</h3>
                <div id="afternoon-slots" class="time-grid"></div>
            </div>
            
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color morning-legend"></div>
                    <span>Horario mañana</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color afternoon-legend"></div>
                    <span>Horario tarde</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color available-legend"></div>
                    <span>Disponible</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color unavailable-legend"></div>
                    <span>No disponible</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Variables globales
        let availability = {};
        const morningSlots = ['7:00', '8:00', '9:00', '10:00', '11:00'];
        const afternoonSlots = ['14:00', '15:00', '16:00', '17:00'];
        
        // Simulación de datos de médicos
        const doctors = [
            { id: "dr1", nombres: "Javier", apellidos: "López", especialidad: "Cardiología" },
            { id: "dr2", nombres: "Ana", apellidos: "Martínez", especialidad: "Pediatría" },
            { id: "dr3", nombres: "Carlos", apellidos: "Rodríguez", especialidad: "Ortopedia" },
            { id: "dr4", nombres: "Laura", apellidos: "García", especialidad: "Dermatología" },
            { id: "dr5", nombres: "Sofía", apellidos: "Pérez", especialidad: "Ginecología" },
            { id: "dr6", nombres: "Ricardo", apellidos: "González", especialidad: "Neurología" },
            { id: "dr7", nombres: "Patricia", apellidos: "Morales", especialidad: "Oftalmología" },
            { id: "dr8", nombres: "Ernesto", apellidos: "Silva", especialidad: "Psiquiatría" },
            { id: "dr9", nombres: "Gabriela", apellidos: "Núñez", especialidad: "Endocrinología" },
            { id: "dr10", nombres: "Luis", apellidos: "Fernández", especialidad: "Gastroenterología" },
            { id: "dr11", nombres: "Mariana", apellidos: "Ortega", especialidad: "Oncología" },
            { id: "dr12", nombres: "Oscar", apellidos: "Jiménez", especialidad: "Neumología" },
            { id: "dr13", nombres: "Luis", apellidos: "Herrera", especialidad: "Urología" },
            { id: "dr14", nombres: "Claudia", apellidos: "Díaz", especialidad: "Medicina Interna" },
            { id: "dr15", nombres: "Andrés", apellidos: "Guzmán", especialidad: "Cirugía Plástica" }
        ];
        
        // Cargar médicos al iniciar
        document.addEventListener('DOMContentLoaded', () => {
            loadDoctors();
            
            // Configurar eventos para los selectores
            document.getElementById('specialty-select').addEventListener('change', function() {
                filterDoctors();
                document.getElementById('time-slots-container').style.display = 'none';
            });
            
            document.getElementById('doctor-select').addEventListener('change', function() {
                const doctorId = this.value;
                if (doctorId) {
                    loadAvailability(doctorId);
                } else {
                    document.getElementById('time-slots-container').style.display = 'none';
                }
            });
        });
        
        // Filtrar médicos por especialidad
        function filterDoctors() {
            const specialtySelect = document.getElementById('specialty-select');
            const doctorSelect = document.getElementById('doctor-select');
            const selectedSpecialty = specialtySelect.value;
            
            // Resetear selección de médico
            doctorSelect.value = '';
            
            // Mostrar solo médicos de la especialidad seleccionada
            for (let i = 1; i < doctorSelect.options.length; i++) {
                const option = doctorSelect.options[i];
                const specialty = option.getAttribute('data-specialty');
                
                if (!selectedSpecialty || specialty === selectedSpecialty) {
                    option.style.display = '';
                } else {
                    option.style.display = 'none';
                }
            }
        }
        
        // Cargar lista de médicos
        function loadDoctors() {
            const select = document.getElementById('doctor-select');
            
            select.innerHTML = '<option value="">Seleccione un médico</option>';
            doctors.forEach(doctor => {
                const option = document.createElement('option');
                option.value = doctor.id;
                option.textContent = `${doctor.nombres} ${doctor.apellidos} - ${doctor.especialidad}`;
                option.setAttribute('data-specialty', doctor.especialidad);
                select.appendChild(option);
            });
        }
        
        // Obtener los días del mes actual
        function getCurrentMonthDays() {
            const now = new Date();
            const currentMonth = now.getMonth();
            const currentYear = now.getFullYear();
            
            // Obtener el primer y último día del mes
            const firstDay = new Date(currentYear, currentMonth, 1);
            const lastDay = new Date(currentYear, currentMonth + 1, 0);
            
            const days = [];
            const dayNames = ['Dom', 'Lun', 'Mar', 'Mié', 'Jue', 'Vie', 'Sáb'];
            
            for (let day = firstDay.getDate(); day <= lastDay.getDate(); day++) {
                const date = new Date(currentYear, currentMonth, day);
                const dayName = dayNames[date.getDay()];
                
                // Solo incluir días laborales (de lunes a viernes)
                if (date.getDay() >= 1 && date.getDay() <= 5) {
                    days.push({
                        date: day,
                        dayName: dayName,
                        fullDate: date
                    });
                }
            }
            
            return days;
        }
        
        // Cargar disponibilidad para un médico
        function loadAvailability(doctorId) {
            document.getElementById('time-slots-container').style.display = 'block';
            
            // Obtener los días del mes actual
            const monthDays = getCurrentMonthDays();
            
            // Generar disponibilidad aleatoria para cada día
            availability = {};
            monthDays.forEach((dayObj, index) => {
                availability[index] = {};
                
                // Mañana
                morningSlots.forEach(time => {
                    availability[index][time] = Math.random() > 0.3 ? 1 : 0;
                });
                
                // Tarde
                afternoonSlots.forEach(time => {
                    availability[index][time] = Math.random() > 0.3 ? 1 : 0;
                });
            });
            
            generateTimeSlots();
        }
        
        // Generar los slots de tiempo en la UI
        function generateTimeSlots() {
            const morningContainer = document.getElementById('morning-slots');
            const afternoonContainer = document.getElementById('afternoon-slots');
            
            morningContainer.innerHTML = '';
            afternoonContainer.innerHTML = '';
            
            // Obtener los días del mes actual
            const monthDays = getCurrentMonthDays();
            
            // Crear columnas por día
            monthDays.forEach((dayObj, dayIndex) => {
                const dateStr = `${dayObj.dayName} ${dayObj.date}`;
                
                // Columna para mañana
                const morningColumn = document.createElement('div');
                morningColumn.className = 'day-column';
                
                const morningHeader = document.createElement('div');
                morningHeader.className = 'day-header';
                morningHeader.textContent = dateStr;
                morningColumn.appendChild(morningHeader);
                
                const morningSlotsContainer = document.createElement('div');
                morningSlotsContainer.className = 'time-slots';
                
                morningSlots.forEach(time => {
                    const isAvailable = availability[dayIndex][time] > 0;
                    
                    const slot = document.createElement('div');
                    slot.className = `time-slot morning ${isAvailable ? 'available' : 'unavailable'}`;
                    slot.textContent = time;
                    
                    if (isAvailable) {
                        slot.addEventListener('click', () => {
                            alert(`Has seleccionado la cita para el ${dateStr} a las ${time} horas.`);
                        });
                    }
                    
                    morningSlotsContainer.appendChild(slot);
                });
                
                morningColumn.appendChild(morningSlotsContainer);
                morningContainer.appendChild(morningColumn);
                
                // Columna para tarde
                const afternoonColumn = document.createElement('div');
                afternoonColumn.className = 'day-column';
                
                const afternoonHeader = document.createElement('div');
                afternoonHeader.className = 'day-header';
                afternoonHeader.textContent = dateStr;
                afternoonColumn.appendChild(afternoonHeader);
                
                const afternoonSlotsContainer = document.createElement('div');
                afternoonSlotsContainer.className = 'time-slots';
                
                afternoonSlots.forEach(time => {
                    const isAvailable = availability[dayIndex][time] > 0;
                    
                    const slot = document.createElement('div');
                    slot.className = `time-slot afternoon ${isAvailable ? 'available' : 'unavailable'}`;
                    slot.textContent = time;
                    
                    if (isAvailable) {
                        slot.addEventListener('click', () => {
                            alert(`Has seleccionado la cita para el ${dateStr} a las ${time} horas.`);
                        });
                    }
                    
                    afternoonSlotsContainer.appendChild(slot);
                });
                
                afternoonColumn.appendChild(afternoonSlotsContainer);
                afternoonContainer.appendChild(afternoonColumn);
            });
        }
    </script>
</body>
</html>
